<!doctype html>
<html>
  <head>
    <title>Tests for jsBytes</title>
  </head>
  <body>
    <script src="jsTest.js"></script>
    <script src="jsBytes.js"></script>
    <div id="results"></div>
    <script>
      var suite = new jsTest.TestSuite();

      suite.addTest('testBytesToHex', function(test) {
        test.assertEqual('0 should generate 00.',
            '00', jsBytes.bytesToHex([0]));
        test.assertEqual('255 should generate FF.',
            'FF', jsBytes.bytesToHex([255]));
        test.assertEqual('Check multi byte array.',
            '0116B90C', jsBytes.bytesToHex([1, 22, 185, 12]));
      });

      suite.addTest('testHexToBytes', function(test) {
        test.assertArraysEqual('00 should generate 0.',
            [0], jsBytes.hexToBytes('00'));
        test.assertArraysEqual('FF should generate 255.',
            [255], jsBytes.hexToBytes('FF'));
        test.assertArraysEqual('Check multi byte array.',
            [1, 22, 185, 12], jsBytes.hexToBytes('0116B90C'));
      });

      suite.addTest('testAppendByte', function(test) {
        var bytes = [];
        jsBytes.appendByte(bytes, 0);
        test.assertArraysEqual('appendByte 0 should succeed.', [0], bytes);
        jsBytes.appendByte(bytes, 255);
        test.assertArraysEqual('appendByte 255 should succeed.',
            [0, 255], bytes);
        test.assertThrows('Should be unable to append -1.',
            function() {jsBytes.appendByte(bytes, -1);});
        test.assertArraysEqual('-1 should not have been added.',
            [0, 255], bytes);
        test.assertThrows('Should be unable to append 256.',
            function() {jsBytes.appendByte(bytes, 256);});
        test.assertArraysEqual('256 should not have been added.',
            [0, 255], bytes);
      });

      suite.addTest('testInt32ToBytes', function(test) {
        test.assertArraysEqual('Check 0', [0,0,0,0], jsBytes.int32ToBytes(0));
        test.assertArraysEqual('Check 255', [255,0,0,0],
            jsBytes.int32ToBytes(255));
        test.assertArraysEqual('Check 256', [0,1,0,0],
            jsBytes.int32ToBytes(256));
        test.assertArraysEqual('Check int max', [255,255,255,127],
            jsBytes.int32ToBytes(2147483647));
        test.assertArraysEqual('Check unsigned int max', [255,255,255,255],
            jsBytes.int32ToBytes(4294967295));
        test.assertArraysEqual('Check -1', [255,255,255,255],
            jsBytes.int32ToBytes(-1));
        test.assertArraysEqual('Check -2', [254,255,255,255],
            jsBytes.int32ToBytes(-2));
        test.assertArraysEqual('Check -256', [0,255,255,255],
            jsBytes.int32ToBytes(-256));
        test.assertArraysEqual('Check -257', [255,254,255,255],
            jsBytes.int32ToBytes(-257));
        test.assertArraysEqual('Check negative int max', [0,0,0,128],
            jsBytes.int32ToBytes(-2147483648));
        test.assertThrows('Check beyond negative int max',
            function() {jsBytes.int32ToBytes(-2147483649);});
        test.assertThrows('Check beyond unsigned int max',
            function() {jsBytes.int32ToBytes(4294967296);});
        test.assertThrows('Check floating point input',
            function() {jsBytes.int32ToBytes(2.02);});
      });

      suite.runTests(document.getElementById('results'));
    </script>
  </body>
</html>
